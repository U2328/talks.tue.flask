{% extends "base.html" %}

{% block content %}
<div class="ui one column stackable centered aligned page grid">
    <div class="column twelve wide">
        <div class="ui top attached secondary menu">
            <div class="item">
                <h3>{{ _("Subscription to '%(collection)s'", collection=subscription.collection.title) }}</h3>
            </div>
            <div class="right labeled icon menu">
                <a id="deleteModalTrigger" class="ui small button item"><i class="trash alternate outline icon"></i>{{ _("Delete") }}</a>
            </div>
        </div>
        <div class="ui attached segment">
            <form id="subscriptionForm" method="post" action="{{ url_for("auth.subscription", id=subscription.collection.id) }}" class="ui {% if form.errors %}error {% endif %}form" novalidate>
                {{ form.csrf_token }}
                <div class="field">
                    <label>{{ _("Collection") }}</label>
                    <input type="text" placeholder="{{ subscription.collection.title }}" readonly>
                </div>
                <div class="field{% if form.mode.errors %} error{% endif %}">
                    {{ form.mode.label }}
                    {{ form.mode(class_='ui dropdown') }}
                </div>
                <div class="inline field{% if form.remind_me.errors %} error{% endif %}">
                    <div class="ui toggle checkbox">
                        {{ form.remind_me(class_="hidden") }}
                        {{ form.remind_me.label }}
                    </div>
                </div>
            </form>
        </div>
        <div class="ui bottom attached segment">
            {{ form.submit(form='subscriptionForm', class="ui button positive") }}
            <a class="ui button negative" href="{{ next }}">{{ _('Cancel') }}</a>
        </div>
    </div>
</div>
<div id="deleteModal" class="ui tiny longer modal">
    <div class="header">{{ _("Are you sure you want to delete this subscription?") }}</div>
    <div class="actions">
        <a class="ui red labeled icon button" href="{{ url_for("auth.unsubscribe", id=subscription.collection.id) }}">
            <i class="trash alternate outline icon"></i>{{ _('Delete') }}
        </a>
        <div class="ui deny button">{{ _('Cancel') }}</div>
    </div>
</div>
{% endblock %}
{% block script %}
<script>
    $('.ui.dropdown').dropdown();
    $('#deleteModal').modal('attach events', '#deleteModalTrigger', 'show');
</script>
{% endblock %}